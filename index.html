<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>5 Stages of AI-Assisted Coding</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=DM+Sans:wght@400;500;600&display=swap');

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0d0f1a;
    --card-bg: #13162a;
    --border: rgba(255,255,255,0.07);
    --s1: #4fa8ff;
    --s2: #7c6aff;
    --s3: #00c9a7;
    --s4: #f97316;
    --s5: #a855f7;
    --warn: #ef4444;
    --text: #e8eaf6;
    --muted: #8892b0;
    --bar-h: 64px;
  }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    padding-top: calc(var(--bar-h) + 24px);
    padding-bottom: 120px;
    overflow-x: hidden;
  }

  /* ===================== STICKY TOP BAR ===================== */
  .top-bar {
    position: fixed;
    top: 0; left: 0; right: 0;
    height: var(--bar-h);
    background: rgba(13,15,26,0.92);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    border-bottom: 1px solid var(--border);
    z-index: 100;
    display: flex;
    align-items: center;
    padding: 0 28px;
    gap: 20px;
  }

  .bar-title {
    font-family: 'Syne', sans-serif;
    font-size: 13px;
    font-weight: 800;
    white-space: nowrap;
    background: linear-gradient(135deg, #fff 40%, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    flex-shrink: 0;
  }

  .bar-progress {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 5px;
    min-width: 0;
  }

  .bar-stage-labels {
    display: flex;
    justify-content: space-between;
    font-size: 9px;
    color: var(--muted);
    font-weight: 600;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }

  .bar-track {
    height: 5px;
    background: rgba(255,255,255,0.08);
    border-radius: 99px;
    position: relative;
  }

  .bar-fill {
    height: 100%;
    border-radius: 99px;
    background: linear-gradient(90deg, var(--s1), var(--s2), var(--s3), var(--s4), var(--s5));
    width: 0%;
    transition: width 0.9s cubic-bezier(0.4,0,0.2,1);
  }

  .bar-dots {
    display: flex;
    justify-content: space-between;
    margin-top: 4px;
  }
  .bar-dot {
    width: 7px; height: 7px;
    border-radius: 50%;
    background: rgba(255,255,255,0.12);
    cursor: pointer;
    transition: background 0.4s, box-shadow 0.4s;
  }
  .bar-dot.active {
    background: #fff;
    box-shadow: 0 0 8px rgba(255,255,255,0.6);
  }

  .bar-counter {
    font-size: 11px;
    color: var(--muted);
    font-weight: 600;
    white-space: nowrap;
    flex-shrink: 0;
    min-width: 70px;
    text-align: right;
  }

  .bar-reset {
    flex-shrink: 0;
    padding: 6px 14px;
    border-radius: 7px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.05);
    color: #fff;
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }
  .bar-reset:hover { background: rgba(255,255,255,0.1); }

  /* ===================== FLOATING BUTTON ===================== */
  .fab-wrap {
    position: fixed;
    bottom: 32px;
    right: 32px;
    z-index: 200;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 10px;
  }

  /* Stage hint tooltip above FAB */
  .fab-hint {
    background: rgba(20,22,40,0.95);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 10px;
    padding: 8px 14px;
    font-size: 12px;
    color: var(--muted);
    white-space: nowrap;
    opacity: 0;
    transform: translateY(6px);
    transition: opacity 0.3s, transform 0.3s;
    pointer-events: none;
  }
  .fab-hint.show { opacity: 1; transform: translateY(0); }
  .fab-hint strong { color: #fff; }

  .fab {
    width: 62px;
    height: 62px;
    border-radius: 50%;
    border: none;
    background: linear-gradient(135deg, #4fa8ff, #7c6aff);
    color: #fff;
    font-size: 22px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 24px rgba(79,168,255,0.4);
    transition: transform 0.2s, box-shadow 0.2s, background 0.4s;
    position: relative;
    flex-shrink: 0;
  }
  .fab:hover {
    transform: scale(1.08);
    box-shadow: 0 6px 32px rgba(79,168,255,0.6);
  }
  .fab:active { transform: scale(0.96); }
  .fab.done {
    background: linear-gradient(135deg, #00c9a7, #a855f7);
    box-shadow: 0 4px 24px rgba(168,85,247,0.4);
    cursor: default;
  }
  .fab.done:hover { transform: none; }

  /* Pulse ring on FAB */
  .fab::before {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    border: 2px solid rgba(79,168,255,0.4);
    animation: fabRing 2s ease-in-out infinite;
  }
  .fab.done::before { display: none; }
  @keyframes fabRing {
    0%, 100% { transform: scale(1); opacity: 0.6; }
    50% { transform: scale(1.2); opacity: 0; }
  }

  /* Stage color override for FAB as stages progress */
  .fab[data-next="2"] { background: linear-gradient(135deg, var(--s1), var(--s2)); }
  .fab[data-next="3"] { background: linear-gradient(135deg, var(--s2), var(--s3)); }
  .fab[data-next="4"] { background: linear-gradient(135deg, var(--s3), var(--s4)); }
  .fab[data-next="5"] { background: linear-gradient(135deg, var(--s4), var(--s5)); }

  /* FAB label inside */
  .fab-label {
    display: flex;
    flex-direction: column;
    align-items: center;
    line-height: 1.1;
  }
  .fab-label .fab-icon { font-size: 18px; }
  .fab-label .fab-num {
    font-family: 'Syne', sans-serif;
    font-size: 10px;
    font-weight: 800;
    letter-spacing: 0.05em;
  }

  /* ===================== MAIN CONTENT ===================== */
  .content {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .header {
    text-align: center;
    margin-bottom: 36px;
    opacity: 0;
    animation: fadeDown 0.8s ease 0.3s forwards;
  }
  .header h1 {
    font-family: 'Syne', sans-serif;
    font-size: clamp(20px, 3.5vw, 32px);
    font-weight: 800;
    background: linear-gradient(135deg, #fff 40%, #a78bfa);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 8px;
    line-height: 1.2;
  }
  .header p {
    color: var(--muted);
    font-size: 14px;
    max-width: 580px;
    margin: 0 auto;
    line-height: 1.65;
  }

  .stages-wrapper { display: flex; flex-direction: column; gap: 0; }

  /* ===================== STAGE CARD ===================== */
  .stage-card {
    border-radius: 16px;
    border: 1px solid var(--border);
    background: var(--card-bg);
    padding: 26px 28px;
    display: flex;
    align-items: flex-start;
    gap: 22px;
    opacity: 0;
    transform: translateY(28px) scale(0.97);
    transition: opacity 0.65s cubic-bezier(0.4,0,0.2,1),
                transform 0.65s cubic-bezier(0.4,0,0.2,1),
                box-shadow 0.4s, border-color 0.4s;
    position: relative;
    overflow: hidden;
    margin-bottom: 0;
  }
  .stage-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, var(--accent-color, transparent), transparent 50%);
    opacity: 0.04;
    pointer-events: none;
  }
  .stage-card.visible {
    opacity: 1;
    transform: translateY(0) scale(1);
    box-shadow: 0 4px 32px rgba(0,0,0,0.3);
    border-color: rgba(255,255,255,0.11);
  }
  .stage-card::after {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 3px;
    background: var(--accent-color);
    border-radius: 3px 0 0 3px;
    opacity: 0;
    transition: opacity 0.5s 0.3s;
  }
  .stage-card.visible::after { opacity: 1; }

  .stage-card[data-stage="1"] { --accent-color: var(--s1); }
  .stage-card[data-stage="2"] { --accent-color: var(--s2); }
  .stage-card[data-stage="3"] { --accent-color: var(--s3); }
  .stage-card[data-stage="4"] { --accent-color: var(--s4); }
  .stage-card[data-stage="5"] { --accent-color: var(--s5); }

  .stage-badge {
    flex-shrink: 0;
    width: 58px; height: 58px;
    border-radius: 50%;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    border: 2px solid var(--accent-color);
    background: rgba(0,0,0,0.3);
    position: relative;
  }
  .badge-pulse {
    position: absolute; inset: 0;
    border-radius: 50%;
    background: radial-gradient(circle, var(--accent-color), transparent 70%);
    opacity: 0;
  }
  .stage-card.visible .badge-pulse {
    opacity: 0.12;
    animation: badgePulse 2.5s ease-in-out infinite;
  }
  @keyframes badgePulse {
    0%,100% { transform: scale(1); opacity: 0.12; }
    50% { transform: scale(1.4); opacity: 0.04; }
  }
  .stage-card.visible .stage-badge::after {
    content: '';
    position: absolute; inset: -6px;
    border-radius: 50%;
    border: 2px solid var(--accent-color);
    opacity: 0;
    animation: ringPulse 0.8s ease 0.2s forwards;
  }
  @keyframes ringPulse {
    0% { opacity: 0.8; transform: scale(1); }
    100% { opacity: 0; transform: scale(1.7); }
  }
  .badge-num {
    font-family: 'Syne', sans-serif;
    font-size: 20px; font-weight: 800;
    color: var(--accent-color); line-height: 1;
  }
  .badge-lbl {
    font-size: 8px; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--muted); font-weight: 600;
  }

  .stage-content { flex: 1; min-width: 0; }
  .stage-header {
    display: flex; align-items: center; gap: 10px;
    margin-bottom: 8px; flex-wrap: wrap;
  }
  .stage-title {
    font-family: 'Syne', sans-serif;
    font-size: 16px; font-weight: 700; color: #fff;
  }
  .stage-multiplier {
    font-family: 'Syne', sans-serif;
    font-size: 17px; font-weight: 800;
    color: var(--accent-color);
    background: rgba(0,0,0,0.3);
    border: 1px solid var(--accent-color);
    padding: 1px 9px; border-radius: 7px;
  }
  .stage-desc {
    color: var(--muted); font-size: 13.5px;
    line-height: 1.65; margin-bottom: 12px;
  }
  .stage-meta { display: flex; gap: 20px; flex-wrap: wrap; }
  .meta-item { display: flex; flex-direction: column; gap: 2px; }
  .meta-label {
    font-size: 9px; text-transform: uppercase;
    letter-spacing: 0.08em; color: var(--muted); font-weight: 600;
  }
  .meta-value { color: var(--text); font-weight: 500; font-size: 12.5px; }
  .meta-value span { color: var(--accent-color); font-weight: 700; }

  /* ===================== CONNECTOR ===================== */
  .connector {
    display: flex; justify-content: center;
    height: 28px; position: relative;
    opacity: 0; transition: opacity 0.5s;
  }
  .connector.visible { opacity: 1; }
  .connector-line {
    width: 2px; height: 100%;
    background: linear-gradient(to bottom, var(--from-color, #4fa8ff), var(--to-color, #7c6aff));
    opacity: 0.35; position: relative;
  }
  .connector-arrow {
    position: absolute; bottom: -5px; left: 50%;
    transform: translateX(-50%);
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 7px solid var(--to-color, #7c6aff);
    opacity: 0.5;
  }

  /* ===================== WARNING ===================== */
  .warning-box {
    background: rgba(239,68,68,0.07);
    border: 1px solid rgba(239,68,68,0.28);
    border-radius: 12px; padding: 14px 18px;
    margin: 12px 0 4px;
    display: flex; gap: 10px; align-items: flex-start;
    opacity: 0; transform: translateY(16px);
    transition: opacity 0.6s, transform 0.6s;
  }
  .warning-box.visible { opacity: 1; transform: translateY(0); }
  .warn-icon { font-size: 20px; flex-shrink: 0; }
  .warn-title {
    font-family: 'Syne', sans-serif;
    font-size: 13px; font-weight: 700;
    color: var(--warn); margin-bottom: 3px;
  }
  .warn-desc { font-size: 12.5px; color: #f9a8a8; line-height: 1.55; }

  /* ===================== FOOTER ===================== */
  .footer {
    margin-top: 24px;
    background: rgba(255,255,255,0.02);
    border: 1px solid var(--border);
    border-radius: 14px; padding: 16px 24px;
    text-align: center;
    opacity: 0; transition: opacity 0.8s;
  }
  .footer.visible { opacity: 1; }
  .footer p { font-size: 13px; color: var(--muted); line-height: 1.7; }
  .footer strong { color: #fff; font-weight: 600; }

  /* ===================== ANIMATIONS ===================== */
  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-16px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 580px) {
    .bar-title { display: none; }
    .bar-stage-labels { display: none; }
    .stage-card { flex-direction: column; padding: 18px; }
    .fab { width: 54px; height: 54px; }
    .fab-label .fab-icon { font-size: 16px; }
    .fab-wrap { bottom: 20px; right: 20px; }
  }
</style>
</head>
<body>

<!-- ===================== STICKY TOP BAR ===================== -->
<div class="top-bar">
  <div class="bar-title">AI Coding Stages</div>

  <div class="bar-progress">
    <div class="bar-stage-labels">
      <span>Chat</span><span>Inline</span><span>Supervisor</span><span>Guardrail</span><span>Orchestration</span>
    </div>
    <div class="bar-track">
      <div class="bar-fill" id="barFill"></div>
    </div>
    <div class="bar-dots">
      <div class="bar-dot" onclick="goTo(1)" title="Stage 1"></div>
      <div class="bar-dot" onclick="goTo(2)" title="Stage 2"></div>
      <div class="bar-dot" onclick="goTo(3)" title="Stage 3"></div>
      <div class="bar-dot" onclick="goTo(4)" title="Stage 4"></div>
      <div class="bar-dot" onclick="goTo(5)" title="Stage 5"></div>
    </div>
  </div>

  <div class="bar-counter" id="barCounter">0 / 5</div>
  <button class="bar-reset" onclick="reset()">↺ Reset</button>
</div>

<!-- ===================== FLOATING ACTION BUTTON ===================== -->
<div class="fab-wrap">
  <div class="fab-hint" id="fabHint"><strong>Stage 1:</strong> Chat + Copy-Paste</div>
  <button class="fab" id="fab" data-next="1" onclick="nextStage()" title="Reveal next stage">
    <div class="fab-label">
      <span class="fab-icon">▶</span>
      <span class="fab-num" id="fabNum">S1</span>
    </div>
  </button>
</div>

<!-- ===================== MAIN CONTENT ===================== -->
<div class="content">
  <div class="header">
    <h1>The 5 Stages of AI-Assisted Coding</h1>
    <p>From Snippets to Orchestration — a roadmap for developers evolving from manual AI usage to multi-agent system orchestration.</p>
  </div>

  <div class="stages-wrapper">

    <div class="stage-card" data-stage="1" id="stage1">
      <div class="stage-badge">
        <div class="badge-pulse"></div>
        <div class="badge-num">1</div>
        <div class="badge-lbl">Stage</div>
      </div>
      <div class="stage-content">
        <div class="stage-header">
          <div class="stage-title">Chat + Copy-Paste</div>
          <div class="stage-multiplier">1.1×</div>
        </div>
        <div class="stage-desc">Progress from manual copy-pasting to inline autocomplete. The developer manually reviews every line, using AI as a smarter clipboard. Productivity gains are modest but the foundation is being built.</div>
        <div class="stage-meta">
          <div class="meta-item"><div class="meta-label">Focus</div><div class="meta-value">Chat + Copy-Paste</div></div>
          <div class="meta-item"><div class="meta-label">Timeframe</div><div class="meta-value"><span>~1 Month</span></div></div>
          <div class="meta-item"><div class="meta-label">Output</div><div class="meta-value"><span>1.1× Developer</span></div></div>
        </div>
      </div>
    </div>

    <div class="connector" id="conn1" style="--from-color:#4fa8ff;--to-color:#7c6aff">
      <div class="connector-line"><div class="connector-arrow"></div></div>
    </div>

    <div class="stage-card" data-stage="2" id="stage2">
      <div class="stage-badge">
        <div class="badge-pulse"></div>
        <div class="badge-num">2</div>
        <div class="badge-lbl">Stage</div>
      </div>
      <div class="stage-content">
        <div class="stage-header">
          <div class="stage-title">Inline Autocomplete</div>
          <div class="stage-multiplier">1.5×</div>
        </div>
        <div class="stage-desc">AI is integrated directly into the editor. Tab-complete suggestions become second nature. The developer starts trusting AI output for boilerplate, tests, and documentation — speeding up the feedback loop.</div>
        <div class="stage-meta">
          <div class="meta-item"><div class="meta-label">Focus</div><div class="meta-value">Editor Integration</div></div>
          <div class="meta-item"><div class="meta-label">Timeframe</div><div class="meta-value"><span>1–3 Months</span></div></div>
          <div class="meta-item"><div class="meta-label">Output</div><div class="meta-value"><span>1.5× Developer</span></div></div>
        </div>
      </div>
    </div>

    <div class="connector" id="conn2" style="--from-color:#7c6aff;--to-color:#00c9a7">
      <div class="connector-line"><div class="connector-arrow"></div></div>
    </div>

    <div class="stage-card" data-stage="3" id="stage3">
      <div class="stage-badge">
        <div class="badge-pulse"></div>
        <div class="badge-num">3</div>
        <div class="badge-lbl">Stage</div>
      </div>
      <div class="stage-content">
        <div class="stage-header">
          <div class="stage-title">The Supervisor Pivot</div>
          <div class="stage-multiplier">2×</div>
        </div>
        <div class="stage-desc">Reach 2× productivity by developing "failure-mode intuition" to steer multi-file coding agents. You stop writing code and start directing agents — reviewing, correcting, and orchestrating rather than implementing.</div>
        <div class="stage-meta">
          <div class="meta-item"><div class="meta-label">Focus</div><div class="meta-value">Coding Agents</div></div>
          <div class="meta-item"><div class="meta-label">Timeframe</div><div class="meta-value"><span>4–6 Months</span></div></div>
          <div class="meta-item"><div class="meta-label">Output</div><div class="meta-value"><span>2× Developer</span></div></div>
        </div>
        <div class="warning-box" id="warningBox">
          <div class="warn-icon">⚠️</div>
          <div>
            <div class="warn-title">THE SHORTCUT TRAP</div>
            <div class="warn-desc">Jumping to automation without Stage 3 intuition leads to brittle systems and failures. You must develop the "feel" for AI failure modes before scaling to full automation.</div>
          </div>
        </div>
      </div>
    </div>

    <div class="connector" id="conn3" style="--from-color:#00c9a7;--to-color:#f97316">
      <div class="connector-line"><div class="connector-arrow"></div></div>
    </div>

    <div class="stage-card" data-stage="4" id="stage4">
      <div class="stage-badge">
        <div class="badge-pulse"></div>
        <div class="badge-num">4</div>
        <div class="badge-lbl">Stage</div>
      </div>
      <div class="stage-content">
        <div class="stage-header">
          <div class="stage-title">The Guardrail Mesh</div>
          <div class="stage-multiplier">5×</div>
        </div>
        <div class="stage-desc">Shift to automated gates and decoupled validation. You build a mesh of guardrails — tests, linters, reviewers — that validate AI output automatically. Your role becomes infrastructure architect, not line reviewer.</div>
        <div class="stage-meta">
          <div class="meta-item"><div class="meta-label">Focus</div><div class="meta-value">Guardrail Mesh</div></div>
          <div class="meta-item"><div class="meta-label">Timeframe</div><div class="meta-value"><span>3+ Months</span></div></div>
          <div class="meta-item"><div class="meta-label">Output</div><div class="meta-value"><span>5× Developer</span></div></div>
        </div>
      </div>
    </div>

    <div class="connector" id="conn4" style="--from-color:#f97316;--to-color:#a855f7">
      <div class="connector-line"><div class="connector-arrow"></div></div>
    </div>

    <div class="stage-card" data-stage="5" id="stage5">
      <div class="stage-badge">
        <div class="badge-pulse"></div>
        <div class="badge-num">5</div>
        <div class="badge-lbl">Stage</div>
      </div>
      <div class="stage-content">
        <div class="stage-header">
          <div class="stage-title">Multi-Agent Orchestration</div>
          <div class="stage-multiplier" style="border-color:var(--s5);color:var(--s5)">10×+</div>
        </div>
        <div class="stage-desc">Coordinate specialized agent teams in parallel to expand autonomy through established guardrails. Scale by upgrading system infrastructure rather than watching every line of code. You operate as a system designer.</div>
        <div class="stage-meta">
          <div class="meta-item"><div class="meta-label">Focus</div><div class="meta-value">System Architecture</div></div>
          <div class="meta-item"><div class="meta-label">Scale</div><div class="meta-value"><span>Systemic Scaling</span></div></div>
          <div class="meta-item"><div class="meta-label">Output</div><div class="meta-value"><span>10×+ Developer</span></div></div>
        </div>
      </div>
    </div>

    <div class="footer" id="footer">
      <p>Success in AI-assisted coding requires consistent <strong>Supervision Discipline</strong> and robust <strong>Guardrail Infrastructure</strong>.<br>The multiplier is not in the tool — it's in how you structure the system around it.</p>
    </div>

  </div>
</div>

<script>
  const STAGES = [
    { card:'stage1', conn:null,    extra:null,         hint:'<strong>Stage 1:</strong> Chat + Copy-Paste',       next:'S2' },
    { card:'stage2', conn:'conn1', extra:null,         hint:'<strong>Stage 2:</strong> Inline Autocomplete',      next:'S3' },
    { card:'stage3', conn:'conn2', extra:'warningBox', hint:'<strong>Stage 3:</strong> The Supervisor Pivot',     next:'S4' },
    { card:'stage4', conn:'conn3', extra:null,         hint:'<strong>Stage 4:</strong> The Guardrail Mesh',       next:'S5' },
    { card:'stage5', conn:'conn4', extra:null,         hint:'<strong>Stage 5:</strong> Multi-Agent Orchestration',next:null  },
  ];
  const PROGRESS = [20, 40, 60, 80, 100];

  let current = 0;
  let hintTimer = null;

  function show(id, delay=0) {
    if (!id) return;
    setTimeout(() => { const el = document.getElementById(id); if(el) el.classList.add('visible'); }, delay);
  }

  function updateUI() {
    // Progress bar
    document.getElementById('barFill').style.width = current > 0 ? PROGRESS[current-1]+'%' : '0%';
    document.querySelectorAll('.bar-dot').forEach((d,i) => d.classList.toggle('active', i < current));
    // Counter
    document.getElementById('barCounter').textContent = current + ' / 5';

    // FAB
    const fab = document.getElementById('fab');
    const fabNum = document.getElementById('fabNum');
    const fabHint = document.getElementById('fabHint');

    if (current >= 5) {
      fab.classList.add('done');
      fab.innerHTML = '<span style="font-size:22px">✓</span>';
      fabHint.innerHTML = '<strong>Complete!</strong> All stages revealed';
      fabHint.classList.add('show');
    } else {
      fab.setAttribute('data-next', current+1);
      fabNum.textContent = 'S'+(current+1);
      // Update FAB hint
      fabHint.innerHTML = STAGES[current].hint;
      // Show hint briefly on each reveal
      fabHint.classList.add('show');
      clearTimeout(hintTimer);
      hintTimer = setTimeout(() => fabHint.classList.remove('show'), 2800);
    }
  }

  function nextStage() {
    if (current >= 5) return;
    const s = STAGES[current];
    current++;

    show(s.conn, 0);
    show(s.card, s.conn ? 180 : 0);
    if (s.extra) show(s.extra, 480);
    if (current === 5) show('footer', 600);

    updateUI();

    // Scroll new card into view
    setTimeout(() => {
      const el = document.getElementById(s.card);
      if (el) el.scrollIntoView({ behavior:'smooth', block:'center' });
    }, 280);
  }

  function goTo(n) {
    if (n <= current) return;
    while (current < n) nextStage();
  }

  function reset() {
    current = 0;
    ['stage1','stage2','stage3','stage4','stage5',
     'conn1','conn2','conn3','conn4','warningBox','footer'].forEach(id => {
      const el = document.getElementById(id);
      if (el) el.classList.remove('visible');
    });
    document.getElementById('barFill').style.width = '0%';
    document.querySelectorAll('.bar-dot').forEach(d => d.classList.remove('active'));
    document.getElementById('barCounter').textContent = '0 / 5';

    // Reset FAB
    const fab = document.getElementById('fab');
    fab.classList.remove('done');
    fab.innerHTML = '<div class="fab-label"><span class="fab-icon">▶</span><span class="fab-num" id="fabNum">S1</span></div>';
    fab.setAttribute('data-next','1');

    const hint = document.getElementById('fabHint');
    hint.innerHTML = '<strong>Stage 1:</strong> Chat + Copy-Paste';
    hint.classList.remove('show');

    window.scrollTo({ top:0, behavior:'smooth' });
  }

  // Show initial FAB hint on load
  setTimeout(() => {
    document.getElementById('fabHint').classList.add('show');
    hintTimer = setTimeout(() => document.getElementById('fabHint').classList.remove('show'), 3000);
  }, 1200);
</script>
</body>
</html>
